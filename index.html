<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="icon" href="/assets/favicon-16x16.jpg?v=2.6.2" type="image/png" sizes="16x16"><link rel="icon" href="/assets/favicon-32x32.jpg?v=2.6.2" type="image/png" sizes="32x32"><meta name="google-site-verification" content="QYaDEhB9Vz4eDrWckzlneS54XVbp-5_Xxhl0nVhi7vE"><meta property="og:type" content="website">
<meta property="og:title" content="Chenyue&#39;s Blog">
<meta property="og:url" content="https://chenyue404.github.io/index.html">
<meta property="og:site_name" content="Chenyue&#39;s Blog">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="å°˜å²³">
<meta name="twitter:card" content="summary"><title>Chenyue's Blog</title><link ref="canonical" href="https://chenyue404.github.io/index.html"><link rel="alternate" href="/atom.xml" type="application/atom+xml"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.1/css/all.min.css" type="text/css"><link rel="stylesheet" href="/css/index.css?v=2.6.2"><script>var Stun = window.Stun || {};
var CONFIG = {
  root: '/',
  algolia: undefined,
  assistSearch: ["google","bing"],
  fontIcon: {"prompt":{"success":"fas fa-check-circle","info":"fas fa-arrow-circle-right","warning":"fas fa-exclamation-circle","error":"fas fa-times-circle"},"copyBtn":"fas fa-copy"},
  sidebar: {"offsetTop":"20px","tocMaxDepth":6},
  header: undefined,
  postWidget: {"endText":true},
  nightMode: {"enable":true},
  back2top: {"enable":true},
  codeblock: {"style":"default","highlight":"light","wordWrap":false},
  reward: false,
  fancybox: false,
  zoomImage: {"gapAside":"20px"},
  galleryWaterfall: undefined,
  lazyload: false,
  pjax: undefined,
  externalLink: {"icon":{"enable":true,"name":"fas fa-external-link-alt"}},
  shortcuts: undefined,
  prompt: {"copyButton":"å¤åˆ¶","copySuccess":"å¤åˆ¶æˆåŠŸ","copyError":"å¤åˆ¶å¤±è´¥"},
  sourcePath: {"js":"js","css":"css","images":"images"},
};

window.CONFIG = CONFIG;</script><meta name="generator" content="Hexo 4.2.0"></head><body><div class="container" id="container"><header class="header" id="header"><div class="header-inner header-inner--height header-inner--bgcolor"><nav class="header-nav header-nav--sticky"><div class="header-nav-inner"><div class="header-nav-menubtn"><i class="fas fa-bars"></i></div><div class="header-nav-menu"><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/"><span class="header-nav-menu-item__icon"><i class="fas fa-home"></i></span><span class="header-nav-menu-item__text">é¦–é¡µ</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/archives/"><span class="header-nav-menu-item__icon"><i class="fas fa-folder-open"></i></span><span class="header-nav-menu-item__text">å½’æ¡£</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/categories/"><span class="header-nav-menu-item__icon"><i class="fas fa-layer-group"></i></span><span class="header-nav-menu-item__text">åˆ†ç±»</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/tags/"><span class="header-nav-menu-item__icon"><i class="fas fa-tags"></i></span><span class="header-nav-menu-item__text">æ ‡ç­¾</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/about/"><span class="header-nav-menu-item__icon"><i class="fas fa-user"></i></span><span class="header-nav-menu-item__text">å…³äº</span></a></div></div><div class="header-nav-search"><span class="header-nav-search__icon"><i class="fas fa-search"></i></span><span class="header-nav-search__text">æœç´¢</span></div><div class="header-nav-mode"><div class="mode"><div class="mode-track"><span class="mode-track-moon"></span><span class="mode-track-sun"></span></div><div class="mode-thumb"></div></div></div></div></nav></div></header><main class="main" id="main"><div class="main-inner"><div class="content-wrap" id="content-wrap"><div class="content content-home" id="content"><section class="postlist"><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2021/open_the_last_path_that_is_not_a_single_folder_qttabbar/">QTTabBaræ‰“å¼€æœ€åä¸€ä¸ªä¸æ˜¯å•æ–‡ä»¶å¤¹çš„è·¯å¾„</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">å‘è¡¨äº</span><span class="post-meta-item__value">2021-11-20</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">æ›´æ–°äº</span><span class="post-meta-item__value">2021-11-20</span></span></div></header><div class="post-body"><div class="post-excerpt"><p>åœ¨æµè§ˆä»£ç çš„æ—¶å€™ï¼Œç»å¸¸é‡åˆ°åŒ…åæ–‡ä»¶å¤¹ï¼Œéœ€è¦ä¸€å±‚ä¸€å±‚ç‚¹è¿›å»ï¼Œå¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥å†™äº†ä¸ªQTTabBarçš„è„šæœ¬æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æ•ˆæœå°±æ˜¯æ‰“å¼€å‰é¢å¯¹è±¡çš„ï¼Œæœ€æ·±ä¸€ä¸ªï¼Œéå•æ–‡ä»¶å¤¹çš„è·¯å¾„ã€‚</p>
<p>å°†<span class="exturl"><a class="exturl__link"   href="https://gist.github.com/chenyue404/a450719f3a57ce76485cec30a7728648#file-"  target="_blank" rel="noopener">è¿™ä¸ªé“¾æ¥</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>ä¿å­˜ä¸ºjsæ–‡ä»¶ï¼Œæ”¾åˆ°ç”µè„‘ä¸Šåˆé€‚çš„åœ°æ–¹ï¼Œç„¶åæ‹–æ”¾åˆ°QTTabBarçš„å‘½ä»¤æ ä¸Šã€‚ç‚¹å‡»å³å¯è¿è¡Œã€‚  </p>
<p>é»˜è®¤ä½œç”¨å¯¹è±¡æ˜¯å½“å‰æ–‡ä»¶å¤¹ï¼Œå¦‚æœå½“å‰é€‰ä¸­çš„é¡¹ç›®æ˜¯å•ä¸ªæ–‡ä»¶å¤¹ï¼Œåˆ™ä½œç”¨å¯¹è±¡æ˜¯é€‰ä¸­æ–‡ä»¶å¤¹ã€‚</p>
<p>æ‹–æ”¾ä¹‹åï¼Œå¯ä»¥ç¼–è¾‘å›¾æ ‡ã€å¿«æ·é”®ç­‰ä¿¡æ¯ã€‚</p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2021/clear_default_open_on_windows/">windowsæ¸…é™¤é»˜è®¤æ‰“å¼€æ–¹å¼</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">å‘è¡¨äº</span><span class="post-meta-item__value">2021-11-20</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">æ›´æ–°äº</span><span class="post-meta-item__value">2021-11-20</span></span></div></header><div class="post-body"><div class="post-excerpt"><p>ä»¥jsæ–‡ä»¶ä¸ºä¾‹ï¼Œæ³¨å†Œè¡¨ä¿©åœ°æ–¹  </p>
<ol>
<li><code>è®¡ç®—æœº\HKEY_CLASSES_ROOT\.js</code><br>é»˜è®¤é¡¹çš„æ•°æ®æ•°å€¼æ”¹å›<code>JSFile</code></li>
<li><code>è®¡ç®—æœº\HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.js\OpenWithProgids</code><br>åªä¿ç•™é»˜è®¤å’ŒJSFileï¼Œå…¶ä»–çš„é¡¹åˆ äº†</li>
</ol>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2021/solve_the_problem_that_port_53_is_occupied_by_svchost/">è§£å†³53ç«¯å£è¢«svchost.exeå ç”¨çš„é—®é¢˜</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">å‘è¡¨äº</span><span class="post-meta-item__value">2021-10-16</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">æ›´æ–°äº</span><span class="post-meta-item__value">2021-10-16</span></span></div></header><div class="post-body"><div class="post-excerpt"><p>ä»Šå¤©æœ¬åœ°è·‘çš„dnsæœåŠ¡çªç„¶æŠ¥é”™äº†ï¼Œè·‘ä¸èµ·æ¥äº†ï¼Œçœ‹ä¸‹é”™è¯¯æ—¥å¿—ï¼Œ53ç«¯å£è¢«å ç”¨äº†ï¼Œè›‹ç–¼ã€‚  </p>

        <h2 id="1-æ‰¾åˆ°æ˜¯è°å ç”¨çš„"   >
          <a href="#1-æ‰¾åˆ°æ˜¯è°å ç”¨çš„" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-æ‰¾åˆ°æ˜¯è°å ç”¨çš„" class="headerlink" title="1. æ‰¾åˆ°æ˜¯è°å ç”¨çš„"></a>1. æ‰¾åˆ°æ˜¯è°å ç”¨çš„</h2>
      <p>ç¬¬ä¸€æƒ³æ³•å°±æ˜¯æ‰¾åˆ°æ˜¯è°åœ¨å ç”¨ï¼Œå¹²æ‰å®ƒå°±è¡Œäº†ã€‚è¿™ä¸ªç®€å•ï¼Œgoogleä¸€ä¸‹å°±çŸ¥é“æ€ä¹ˆæŸ¥æ‰¾ç«¯å£å ç”¨çš„è½¯ä»¶äº†ï¼Œæˆ‘ç”¨çš„ipé›·è¾¾ã€‚ç„¶è€Œï¼Œæˆ‘æƒ³ç®€å•äº†ï¼Œå‘ç°å ç”¨çš„è¿›ç¨‹æ˜¯scvhost.exeï¼Œæ˜¯windowsç³»ç»Ÿè¿›ç¨‹ï¼Œè¿™å¯ä¸èƒ½éšä¾¿å¹²æ‰ã€‚  </p>

        <h2 id="2-æ‰¾å‡ºå…ƒå‡¶"   >
          <a href="#2-æ‰¾å‡ºå…ƒå‡¶" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-æ‰¾å‡ºå…ƒå‡¶" class="headerlink" title="2. æ‰¾å‡ºå…ƒå‡¶"></a>2. æ‰¾å‡ºå…ƒå‡¶</h2>
      <p>scvhostè‚¯å®šä¸æ˜¯çœŸæ­£å‡¶æ‰‹ï¼Œç»§ç»­æŒ–ã€‚è™½ç„¶è¿›ç¨‹åå­—æ˜¯scvhostï¼Œä½†è¿™ä¸æ˜¯å…³é”®ï¼Œè®°ä½è¿™ä¸ªè¿›ç¨‹çš„pidã€‚æ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨ï¼Œç‚¹åˆ°<strong>æœåŠ¡</strong>tabï¼Œæ‰¾åˆ°pidå¯¹åº”çš„æœåŠ¡ï¼Œå‘ç°äº†ï¼Œæ˜¯<strong>Internet Connection Sharing (ICS)</strong>  </p>

        <h2 id="3-å¹²æ‰å‡¶æ‰‹"   >
          <a href="#3-å¹²æ‰å‡¶æ‰‹" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-å¹²æ‰å‡¶æ‰‹" class="headerlink" title="3. å¹²æ‰å‡¶æ‰‹"></a>3. å¹²æ‰å‡¶æ‰‹</h2>
      <p>å¥½äº†ï¼Œæ‰¾åˆ°æ˜¯è°äº†ï¼Œç›´æ¥å¹²æ‰å®ƒï¼æ‰“å¼€windowsçš„æœåŠ¡ï¼Œæ‰¾åˆ°Internet Connection Sharing (ICS)ï¼Œåœæ­¢ã€‚å’¦ï¼ŒæŠ¥é”™äº†</p>
<figure class="highlight plain"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">---------------------------</span><br><span class="line">æœåŠ¡</span><br><span class="line">---------------------------</span><br><span class="line">Windows æ— æ³•åœæ­¢ Internet Connection Sharing (ICS) æœåŠ¡(ä½äº æœ¬åœ°è®¡ç®—æœº ä¸Š)ã€‚</span><br><span class="line">æœåŠ¡å¹¶æœªè¿”å›é”™è¯¯ã€‚è¿™å¯èƒ½æ˜¯ä¸€ä¸ª Windows å†…éƒ¨é”™è¯¯æˆ–æœåŠ¡å†…éƒ¨é”™è¯¯ã€‚</span><br><span class="line">å¦‚æœé—®é¢˜æŒç»­å­˜åœ¨ï¼Œè¯·ä¸ä½ çš„ç³»ç»Ÿç®¡ç†å‘˜è”ç³»ã€‚</span><br><span class="line">---------------------------</span><br><span class="line">ç¡®å®š   </span><br><span class="line">---------------------------</span><br></pre></td></tr></table></div></figure>

<p>æ— æ³•åœæ­¢è¿™ä¸ªæœåŠ¡æ€ä¹ˆåŠï¼ŸGoogleä¸€ä¸‹ï¼Œå‘ç°è¿™ä¸ªæœåŠ¡æ˜¯è·Ÿ<strong>ä¸»æœºç½‘ç»œæœåŠ¡</strong>å…³è”çš„ï¼Œé‚£ä¹ˆå…ˆå»åœæ­¢<strong>ä¸»æœºç½‘ç»œæœåŠ¡</strong>ã€‚<br>å’¦ï¼Œåœæ­¢äº†ï¼Œåˆè‡ªåŠ¨å¯åŠ¨äº†ã€‚æ²¡åŠæ³•ï¼Œå…ˆç¦ç”¨ï¼Œç„¶ååœæ­¢<strong>Internet Connection Sharing (ICS)</strong>ã€‚å¥½äº†ï¼Œå†çœ‹ä¸€ä¸‹ï¼Œ53ç«¯å£è¢«é‡Šæ”¾äº†ã€‚å¥½äº†ï¼Œä¸ºäº†é¿å…æœªçŸ¥çš„é”™è¯¯ï¼Œè¿˜æ˜¯è°ƒè¿‡å¤´æ¥ï¼ŒæŠŠ<strong>ä¸»æœºç½‘ç»œæœåŠ¡</strong>è®¾ç½®å›<code>æ‰‹åŠ¨</code>ã€‚  </p>
<p>é—®é¢˜è§£å†³ğŸ˜</p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2021/set_proxy_for_terminal/">ç»™å‘½ä»¤è¡Œè®¾ç½®ä»£ç†</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">å‘è¡¨äº</span><span class="post-meta-item__value">2021-03-03</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">æ›´æ–°äº</span><span class="post-meta-item__value">2021-05-09</span></span></div></header><div class="post-body"><div class="post-excerpt"><p>æœ€è¿‘åœ¨æFlutterã€‚æˆ‘è§‰å¾—æ•´ä½“è¿˜æ˜¯ä¸å¤ªæˆç†Ÿï¼Œè¡¨ç°ä¹‹ä¸€å°±æ˜¯åœ¨Android Studioé‡Œé¢ç¼–è¯‘è¿è¡Œçš„æ—¶å€™ä¸èƒ½è®¾ç½®ä»£ç†ã€‚Androidå¼€å‘çš„è¯ï¼Œç›´æ¥ç»™gradleè®¾ç½®ä»£ç†å°±è¡Œäº†ï¼Œç„¶è€ŒFlutterä¸æ”¯æŒç›´æ¥è®¾ç½®ä»£ç†ï¼Œè‡³å°‘æˆ‘æ²¡æ‰¾åˆ°æ–¹æ³•ã€‚é‚£ä¹ˆåœ¨å›½å†…è¿™ç§ç‰¹è‰²ç½‘ç»œç¯å¢ƒä¸‹ï¼Œæˆ‘åˆä¸å–œæ¬¢ç”¨é•œåƒä»“åº“ï¼Œæ€ä¹ˆåšFlutterå¼€å‘å‘¢ï¼Ÿ  </p>
<p><strong>ç”¨å‘½ä»¤è¡Œç¼–è¯‘ï¼Œç„¶åç»™å‘½ä»¤è¡Œè®¾ç½®ä»£ç†ã€‚</strong>  </p>
<p>ä¸‹é¢è®°å½•ä¸€ä¸‹ç»™å‘½ä»¤è¡Œè®¾ç½®ä»£ç†çš„æ–¹æ³•  </p>

        <h4 id="Windows"   >
          <a href="#Windows" class="heading-link"><i class="fas fa-link"></i></a><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h4>
      <figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">set http_proxy=http://127.0.0.1:1081</span><br><span class="line">set https_proxy=http://127.0.0.1:1081</span><br><span class="line"></span><br><span class="line">set http_proxy_user=user</span><br><span class="line">set http_proxy_pass=pass</span><br><span class="line"></span><br><span class="line">set https_proxy_user=user</span><br><span class="line">set https_proxy_pass=pass</span><br><span class="line"></span><br><span class="line">set http_proxy=</span><br><span class="line">set https_proxy=</span><br></pre></td></tr></table></div></figure>


        <h4 id="Linux"   >
          <a href="#Linux" class="heading-link"><i class="fas fa-link"></i></a><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h4>
      <figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">export ALL_PROXY="socks5://192.168.99.110:1080"</span><br><span class="line">export all_proxy="socks5://192.168.99.110:1080"</span><br><span class="line"></span><br><span class="line">unset ALL_PROXY</span><br><span class="line">unset all_proxy</span><br></pre></td></tr></table></div></figure>


</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2020/add_cmd_in_right_menu_on_windows10/">Win10ç»™å³é”®èœå•æ·»åŠ â€œåœ¨æ­¤å¤„æ‰“å¼€å‘½ä»¤çª—å£ï¼ˆç®¡ç†å‘˜ï¼‰â€</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">å‘è¡¨äº</span><span class="post-meta-item__value">2020-06-13</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">æ›´æ–°äº</span><span class="post-meta-item__value">2020-06-13</span></span></div></header><div class="post-body"><div class="post-excerpt"><p>åœ¨win10çš„æ¡Œé¢ä¸Šï¼ŒæŒ‰ä½shiftï¼Œå¹¶ç‚¹å‡»å³é”®ï¼Œå°±ä¼šå‘ç°æ¯”ä¸æŒ‰shiftçš„æ—¶å€™ï¼Œå¤šäº†ä¸¤ä¸ªé€‰é¡¹ï¼šâ€œåœ¨æ­¤å¤„æ‰“å¼€å‘½ä»¤è¡Œçª—å£â€å’Œâ€œåœ¨æ­¤å¤„æ‰“å¼€PowerShellçª—å£â€ï¼Œå¾ˆæ˜¯æ–¹ä¾¿ã€‚ä½†æ˜¯ï¼Œæœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ç”¨ç®¡ç†å‘˜æƒé™æ‰“å¼€å‘½ä»¤è¡Œçª—å£è¿›è¡ŒæŸäº›æ“ä½œï¼Œæ€ä¹ˆåŠï¼Ÿä»¥å‰çš„æ–¹æ³•æ˜¯ï¼šæ‰“å¼€å¼€å§‹èœå•ï¼Œè¾“å…¥cmdï¼Œå¯ä»¥çœ‹åˆ°â€œå‘½ä»¤æç¤ºç¬¦â€ï¼Œå³é”®-ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œã€‚ç„¶åå†ä¸€è·¯cdåˆ°éœ€è¦æ“ä½œçš„è·¯å¾„ã€‚é‚£æœ‰æ²¡æœ‰æ›´ç®€å•çš„åŠæ³•å‘¢ï¼Ÿæœ‰çš„ã€‚</p>
<p>win+rï¼Œè¾“å…¥â€œregeditâ€ï¼Œæ‰“å¼€æ³¨å†Œè¡¨ç¼–è¾‘å™¨ï¼Œå®šä½åˆ°â€œ\HKEY_CLASSES_ROOT\Directory\Background\shellâ€ï¼Œå¯ä»¥çœ‹åˆ°shellä¸‹é¢æœ‰ä¸€ä¸ªcmdå’Œä¸€ä¸ªPowershellï¼Œè¿™ä¿©å°±æ˜¯æˆ‘ä»¬åœ¨å³é”®èœå•é‡Œçœ‹åˆ°çš„â€œåœ¨æ­¤å¤„æ‰“å¼€å‘½ä»¤è¡Œçª—å£â€å’Œâ€œåœ¨æ­¤å¤„æ‰“å¼€PowerShellçª—å£â€ï¼Œé‚£æ€ä¹ˆå¢åŠ ä¸€ä¸ªâ€œåœ¨æ­¤å¤„æ‰“å¼€å‘½ä»¤çª—å£ï¼ˆç®¡ç†å‘˜ï¼‰â€å‘¢ï¼Ÿ</p>
<ol>
<li>åœ¨shellä¸Šå³é”®ï¼Œæ–°å»º-é¡¹ï¼Œè¾“å…¥åå­—â€œrunasâ€</li>
<li>é€‰ä¸­runasï¼ŒåŒå‡»å³ä¾§çš„â€œé»˜è®¤â€ï¼Œå°†æ•°å€¼æ•°æ®ä¿®æ”¹æˆâ€œåœ¨æ­¤å¤„æ‰“å¼€å‘½ä»¤çª—å£ï¼ˆç®¡ç†å‘˜ï¼‰â€</li>
<li>åœ¨runasä¸Šå³é”®ï¼Œæ–°å»º-é¡¹ï¼Œåç§°commandï¼ŒåŒå‡»å³ä¾§çš„â€œé»˜è®¤â€ï¼Œæ•°å€¼æ•°æ®æ”¹æˆâ€œ<code>cmd.exe /s /k pushd &quot;%V&quot;</code>â€</li>
<li>åœ¨runasä¸Šå³é”®ï¼Œæ–°å»º-å­—ç¬¦ä¸²å€¼ï¼Œåç§°å¡«â€œExtendedâ€ï¼Œæ•°å€¼æ•°æ®ç•™ç©º</li>
<li>åœ¨runasä¸Šå³é”®ï¼Œæ–°å»º-å­—ç¬¦ä¸²å€¼ï¼Œåç§°å¡«â€œNoWorkingDirectoryâ€ï¼Œæ•°å€¼æ•°æ®ç•™ç©º</li>
<li>åœ¨runasä¸Šå³é”®ï¼Œæ–°å»º-DWOR(32ä½)å€¼ï¼Œæ•°å€¼åç§°ShowBasedOnVelocityIdï¼Œæ•°å€¼æ•°æ®639bc8</li>
</ol>
<p>4-6æ­¥ï¼Œå¯ä»¥å‚è€ƒç³»ç»Ÿè‡ªå¸¦çš„cmdé¡¹ï¼Œä¸€æ‘¸ä¸€æ ·åœ°æŠ„ä¸€éå°±è¡Œäº†ã€‚<br>å®Œæˆï¼Œç°åœ¨åœ¨æ¡Œé¢ä¸ŠæŒ‰ä½shiftå¹¶å•å‡»å³é”®ï¼Œå³å¯çœ‹åˆ°å¤šå‡ºæ¥ä¸€ä¸ªâ€œåœ¨æ­¤å¤„æ‰“å¼€å‘½ä»¤çª—å£ï¼ˆç®¡ç†å‘˜ï¼‰â€ã€‚</p>
<p>å¦‚æœæƒ³è¦ä¸æŒ‰shiftå°±å¯ä»¥çœ‹åˆ°ï¼Œåˆ é™¤Extendedé¡¹å³å¯ã€‚<br>å¦‚æœæƒ³æ’åºï¼Œåœ¨runaså‰é¢åŠ ä¸Šæ•°å­—å°±è¡Œäº†ã€‚æ¯”å¦‚0cmdï¼Œ1runasï¼Œè¿™ä¿©å°±ä¼šæ’åˆ°å‰é¢å»ã€‚</p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2020/use_itemtouchhelper_simplely/">ItemTouchHelperçš„ç®€å•åº”ç”¨</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">å‘è¡¨äº</span><span class="post-meta-item__value">2020-02-23</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">æ›´æ–°äº</span><span class="post-meta-item__value">2020-02-23</span></span></div></header><div class="post-body"><div class="post-excerpt"><p>æ–°éœ€æ±‚ï¼Œè¡¨æ ¼æ˜¾ç¤ºç…§ç‰‡ï¼Œå¹¶å¯ä»¥æ‹–åŠ¨æ’åºã€‚<br>ç¬¬ä¸€ååº”ï¼ŒRecyclerViewå•Šã€‚é‚£æ‹–åŠ¨æ€ä¹ˆåŠï¼Ÿæœäº†ä¸€ä¸‹ï¼Œç³»ç»Ÿæä¾›äº†ItemTouchHelperï¼Œç›´æ¥ç”¨å°±è¡Œäº†ã€‚ä¸‹é¢ç®€å•è®°å½•ä¸€ä¸‹ä½¿ç”¨æ–¹æ³•ï¼ŒåŠè¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜ã€‚</p>

        <h2 id="ä½¿ç”¨æ–¹æ³•"   >
          <a href="#ä½¿ç”¨æ–¹æ³•" class="heading-link"><i class="fas fa-link"></i></a><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h2>
      
        <h3 id="é¦–å…ˆå…ˆå†™å¥½ä¸€ä¸ªRecyclerViewã€‚"   >
          <a href="#é¦–å…ˆå…ˆå†™å¥½ä¸€ä¸ªRecyclerViewã€‚" class="heading-link"><i class="fas fa-link"></i></a><a href="#é¦–å…ˆå…ˆå†™å¥½ä¸€ä¸ªRecyclerViewã€‚" class="headerlink" title="é¦–å…ˆå…ˆå†™å¥½ä¸€ä¸ªRecyclerViewã€‚"></a>é¦–å…ˆå…ˆå†™å¥½ä¸€ä¸ªRecyclerViewã€‚</h3>
      <p>ä»¥ä¸‹æ˜¯adapterçš„å…³é”®ä»£ç ï¼šå›ºå®šç¬¬ä¸€ä¸ªitemç”¨æ¥æ˜¾ç¤ºæ‹ç…§ï¼Œå…¶ä»–itemæ˜¾ç¤ºä¼ å…¥çš„æ•°æ®</p>
<figure class="highlight kotlin"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">getItemCount</span><span class="params">()</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">    <span class="comment">//åŠ ä¸€æ˜¾ç¤ºç¬¬ä¸€ä¸ªæ‹ç…§item</span></span><br><span class="line">  <span class="keyword">return</span> <span class="number">1</span> + <span class="keyword">if</span> (dataArray.isNullOrEmpty()) &#123;</span><br><span class="line">        <span class="number">0</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        dataArray.size</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onBindViewHolder</span><span class="params">(holder: <span class="type">ViewHolder</span>, position: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">    <span class="comment">//ç¬¬ä¸€ä¸ªå›ºå®šæ˜¾ç¤ºæ‹ç…§</span></span><br><span class="line">  <span class="keyword">if</span> (position == <span class="number">0</span>) &#123;</span><br><span class="line">        holder.tv_content.text = <span class="string">"æ‹ç…§"</span></span><br><span class="line">  holder.tv_content.setBackgroundColor(</span><br><span class="line">            ContextCompat.getColor(</span><br><span class="line">                holder.itemView.context,</span><br><span class="line">                android.R.color.black</span><br><span class="line">  )</span><br><span class="line">        )</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> dataPos = position - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">val</span> text = dataArray[dataPos][<span class="number">0</span>].toString()</span><br><span class="line">    <span class="keyword">val</span> bgColor = ContextCompat.getColor(</span><br><span class="line">        holder.itemView.context,</span><br><span class="line">        dataArray[dataPos][<span class="number">1</span>]</span><br><span class="line">    )</span><br><span class="line">    holder.tv_content.text = text</span><br><span class="line">    holder.tv_content.setBackgroundColor(bgColor)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="å°†ItemTouchHelperé™„åŠ åˆ°RecyclerViewä¸Š"   >
          <a href="#å°†ItemTouchHelperé™„åŠ åˆ°RecyclerViewä¸Š" class="heading-link"><i class="fas fa-link"></i></a><a href="#å°†ItemTouchHelperé™„åŠ åˆ°RecyclerViewä¸Š" class="headerlink" title="å°†ItemTouchHelperé™„åŠ åˆ°RecyclerViewä¸Š"></a>å°†ItemTouchHelperé™„åŠ åˆ°RecyclerViewä¸Š</h3>
      <p>é‚£æˆ‘ä»¬å°±éœ€è¦newä¸€ä¸ªItemTouchHelperï¼Œè€ŒItemTouchHelperéœ€è¦ä¼ å…¥ä¸€ä¸ªItemTouchHelper.Callbackï¼Œæ¥ä¸‹æ¥æ–°å»ºä¸€ä¸ªç±»ç»§æ‰¿å­ItemTouchHelper.Callback</p>
<figure class="highlight kotlin"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyItemTouchHelperCallback</span></span>(<span class="keyword">val</span> listener: MyTouchHelperListener) : ItemTouchHelper.Callback() &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">getMovementFlags</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">        recyclerView: <span class="type">RecyclerView</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">        viewHolder: <span class="type">RecyclerView</span>.<span class="type">ViewHolder</span></span></span></span><br><span class="line"><span class="function"><span class="params">    )</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">        <span class="keyword">val</span> dragFlags =</span><br><span class="line">            ItemTouchHelper.UP or ItemTouchHelper.DOWN or ItemTouchHelper.LEFT or ItemTouchHelper.RIGHT</span><br><span class="line">        <span class="keyword">val</span> swipeFlags = ItemTouchHelper.LEFT</span><br><span class="line">        <span class="keyword">return</span> makeMovementFlags(dragFlags, <span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onMove</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">        recyclerView: <span class="type">RecyclerView</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">        viewHolder: <span class="type">RecyclerView</span>.<span class="type">ViewHolder</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">        target: <span class="type">RecyclerView</span>.<span class="type">ViewHolder</span></span></span></span><br><span class="line"><span class="function"><span class="params">    )</span></span>: <span class="built_in">Boolean</span> &#123;</span><br><span class="line">        listener?.onMove(viewHolder.adapterPosition, target.adapterPosition)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onSwiped</span><span class="params">(viewHolder: <span class="type">RecyclerView</span>.<span class="type">ViewHolder</span>, direction: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">interface</span> <span class="title">MyTouchHelperListener</span> </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">fun</span> <span class="title">onMove</span><span class="params">(fromPos: <span class="type">Int</span>, toPos: <span class="type">Int</span>)</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>å¿…é¡»é‡å†™3ä¸ªæ–¹æ³•ï¼š</p>
<ol>
<li>getMovementFlags<br>æ§åˆ¶Itemå¾€å“ªäº›æ–¹å‘å¯ä»¥æ‹–ï¼Œå¾€å“ªäº›æ–¹å‘å¯ä»¥æ»‘</li>
<li>onMove<br>Itemç§»åŠ¨çš„æ—¶å€™ä¼šè¢«è°ƒç”¨ã€‚æˆ‘ä»¬åœ¨è¿™é‡ŒæŠŠå®ƒä¼ åˆ°adapteré‡Œé¢ï¼Œè¿›è¡ŒItemçš„äº¤æ¢ã€‚åˆ›å»ºListenerï¼Œå¹¶åœ¨adapteré‡Œé¢å®ç°<figure class="highlight kotlin"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ListAdapter</span></span>(<span class="keyword">private</span> <span class="keyword">val</span> dataArray: Array&lt;Array&lt;<span class="built_in">Int</span>&gt;&gt;) :</span><br><span class="line">    RecyclerView.Adapter&lt;ListAdapter.ViewHolder&gt;(),</span><br><span class="line">    MyItemTouchHelperCallback.MyTouchHelperListener &#123;</span><br><span class="line">    <span class="comment">//çœç•¥</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onMove</span><span class="params">(fromPos: <span class="type">Int</span>, toPos: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">        notifyItemMoved(fromPos, toPos)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure></li>
<li>onSwiped<br>Itemæ»‘åŠ¨çš„æ—¶å€™è¢«è°ƒç”¨ã€‚è¿™ä¸ªä¾‹å­ç”¨ä¸åˆ°ã€‚<br>æœ€åå†æŠŠItemTouchHelpé™„åŠ åˆ°RecyclerViewä¸Š<figure class="highlight kotlin"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ItemTouchHelper(MyItemTouchHelperCallback(listAdapter)).attachToRecyclerView(rv_list)</span><br></pre></td></tr></table></div></figure>

</li>
</ol>
<p>å¥½çš„ï¼Œåˆ°è¿™é‡Œä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»å®ç°äº†æ‹–æ‹½äº¤æ¢itemäº†ã€‚é‚£ä¹ˆæ¥ä¸‹æ¥è¿˜æœ‰å“ªäº›é—®é¢˜å‘¢ï¼Ÿ</p>

        <h2 id="å„ç§é—®é¢˜"   >
          <a href="#å„ç§é—®é¢˜" class="heading-link"><i class="fas fa-link"></i></a><a href="#å„ç§é—®é¢˜" class="headerlink" title="å„ç§é—®é¢˜"></a>å„ç§é—®é¢˜</h2>
      
        <h3 id="onMoveä¸€ç›´è¢«è°ƒç”¨"   >
          <a href="#onMoveä¸€ç›´è¢«è°ƒç”¨" class="heading-link"><i class="fas fa-link"></i></a><a href="#onMoveä¸€ç›´è¢«è°ƒç”¨" class="headerlink" title="onMoveä¸€ç›´è¢«è°ƒç”¨"></a>onMoveä¸€ç›´è¢«è°ƒç”¨</h3>
      <p>æ‹–æ‹½äº¤æ¢itemä¸æ˜¯UIäº¤æ¢å°±å®Œäº‹äº†ï¼Œæ•°æ®ä¹Ÿæ˜¯éœ€è¦å˜çš„ã€‚ç„¶è€Œæˆ‘ä»¬å‘ç°è¿™ä¸ªonMoveæ–¹æ³•ä¸€ç›´åœ¨è°ƒç”¨ï¼Œæœ¬åœ°ä¸´æ—¶æ•°æ®å€’æ— æ‰€è°“ï¼Œä¸€ç›´æ›´æ”¹ä¹Ÿæ²¡ä»€ä¹ˆï¼Œä½†æ˜¯æˆ‘ä»¬æ˜¯éœ€è¦æäº¤ç½‘ç»œçš„ï¼Œæ€»ä¸èƒ½ä¸€ç›´æäº¤å§ï¼Ÿ<br>é‡å†™ItemTouchHelper.Callbackçš„clearViewæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šåœ¨æ‰€æœ‰æ‰‹åŠ¿å’ŒåŠ¨ç”»å®Œæˆä¹‹åè¢«è°ƒç”¨ï¼Œç¬¬ä¸€æ¬¡onMoveçš„æ—¶å€™è®°å½•å¼€å§‹çš„ä½ç½®ï¼ŒclearViewçš„æ—¶å€™è®°å½•ç»“æŸçš„ä½ç½®ï¼Œç„¶åå†å¤„ç†æ•°æ®ã€‚<br>MyItemTouchHelperCallback</p>
<figure class="highlight kotlin"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">clearView</span><span class="params">(recyclerView: <span class="type">RecyclerView</span>, viewHolder: <span class="type">RecyclerView</span>.<span class="type">ViewHolder</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.clearView(recyclerView, viewHolder)</span><br><span class="line">    listener.onEnd(viewHolder.adapterPosition)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">MyTouchHelperListener</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">onMove</span><span class="params">(fromPos: <span class="type">Int</span>, toPos: <span class="type">Int</span>)</span></span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">onEnd</span><span class="params">(endPos: <span class="type">Int</span>)</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>ListAdapter</p>
<figure class="highlight kotlin"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">var</span> startDataPos = -<span class="number">1</span> </span><br><span class="line"><span class="keyword">private</span> <span class="keyword">var</span> endDataPos = -<span class="number">1</span> </span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onMove</span><span class="params">(fromPos: <span class="type">Int</span>, toPos: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">    notifyItemMoved(fromPos, toPos)</span><br><span class="line">    startDataPos = fromPos - <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onEnd</span><span class="params">(endPos: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">    endDataPos = endPos - <span class="number">1</span>;</span><br><span class="line">    <span class="comment">//å¤„ç†æ•°æ®ï¼Œè„šæ ‡å½’é›¶</span></span><br><span class="line">    dataArray[startDataPos] = dataArray[endDataPos].also &#123;</span><br><span class="line">      dataArray[endDataPos] = dataArray[startDataPos]</span><br><span class="line">    &#125;</span><br><span class="line">    startDataPos = <span class="number">0</span></span><br><span class="line">    endDataPos = <span class="number">0</span> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="ç¬¬ä¸€ä¸ªitemä¸èƒ½æ‹–åŠ¨"   >
          <a href="#ç¬¬ä¸€ä¸ªitemä¸èƒ½æ‹–åŠ¨" class="heading-link"><i class="fas fa-link"></i></a><a href="#ç¬¬ä¸€ä¸ªitemä¸èƒ½æ‹–åŠ¨" class="headerlink" title="ç¬¬ä¸€ä¸ªitemä¸èƒ½æ‹–åŠ¨"></a>ç¬¬ä¸€ä¸ªitemä¸èƒ½æ‹–åŠ¨</h3>
      <p>ç¬¬ä¸€ä¸ªä½ç½®æ˜¯ç”¨æ¥æ˜¾ç¤ºæ‹ç…§çš„ï¼Œä¸èƒ½å’Œæ™®é€šç…§ç‰‡ä¸€æ ·è¢«æ‹–åŠ¨ï¼Œæ€ä¹ˆåŠï¼Ÿ<br>ä¸¤ä¸ªåŠæ³•ï¼š</p>
<ol>
<li>åœ¨getMovementFlagsé‡Œé¢åˆ¤æ–­ï¼Œæ ¹æ®MyTouchHelperListeneræ–°å¢ä¸€ä¸ªæ–¹æ³•é€šè¿‡ListAdapterè¿”å›boolå€¼ï¼Œæˆ–è€…æ ¹æ®viewHolderçš„ä½ç½®ï¼Œæ¥åˆ¤æ–­èƒ½ä¸èƒ½æ‹–æ‹½ã€‚</li>
<li>é‡å†™ItemTouchHelper.Callbackçš„isLongPressDragEnabledæ–¹æ³•ï¼Œè¿”å›falseï¼Œç¦æ­¢é•¿æŒ‰æ‹–æ‹½ã€‚å†ç»™itemæ·»åŠ é•¿æŒ‰äº‹ä»¶ï¼Œè°ƒç”¨ItemTouchHelper.startDragæ¥å¼€å¯æ‹–æ‹½ã€‚</li>
</ol>

        <h3 id="ç¬¬ä¸€ä¸ªitemä¸èƒ½è¢«ç§»åŠ¨"   >
          <a href="#ç¬¬ä¸€ä¸ªitemä¸èƒ½è¢«ç§»åŠ¨" class="heading-link"><i class="fas fa-link"></i></a><a href="#ç¬¬ä¸€ä¸ªitemä¸èƒ½è¢«ç§»åŠ¨" class="headerlink" title="ç¬¬ä¸€ä¸ªitemä¸èƒ½è¢«ç§»åŠ¨"></a>ç¬¬ä¸€ä¸ªitemä¸èƒ½è¢«ç§»åŠ¨</h3>
      <p>ç¬¬ä¸€ä¸ªä½ç½®åŒæ ·ä¸åº”è¯¥èƒ½è¢«å…¶ä»–çš„itemæŒ¤èµ°ï¼Œæ€ä¹ˆåŠï¼Ÿ<br>è¿™ä¸ªå¥½è¯´ï¼Œä¹Ÿæ˜¯ä¸¤ä¸ªåŠæ³•ï¼š</p>
<ol>
<li>é‡å†™canDragOverï¼Œè¿”å›falseå³å¯ã€‚å…·ä½“ä»€ä¹ˆæ—¶å€™è¿”å›falseï¼Œå‚è€ƒä¸Šé¢ä¸€ä¸ªé—®é¢˜çš„æ–¹æ³•1</li>
<li>æ›´ç®€å•ä¸€ç‚¹ï¼Œæ¥æ”¶åˆ°toPosæ˜¯0ï¼Œå°±ä¸äº¤æ¢UI</li>
</ol>

        <h3 id="æ€ä¹ˆåœ¨é•¿æŒ‰çš„æ—¶å€™æ˜¾ç¤ºåˆ é™¤æŒ‰é’®"   >
          <a href="#æ€ä¹ˆåœ¨é•¿æŒ‰çš„æ—¶å€™æ˜¾ç¤ºåˆ é™¤æŒ‰é’®" class="heading-link"><i class="fas fa-link"></i></a><a href="#æ€ä¹ˆåœ¨é•¿æŒ‰çš„æ—¶å€™æ˜¾ç¤ºåˆ é™¤æŒ‰é’®" class="headerlink" title="æ€ä¹ˆåœ¨é•¿æŒ‰çš„æ—¶å€™æ˜¾ç¤ºåˆ é™¤æŒ‰é’®"></a>æ€ä¹ˆåœ¨é•¿æŒ‰çš„æ—¶å€™æ˜¾ç¤ºåˆ é™¤æŒ‰é’®</h3>
      <p>è¦æ±‚é•¿æŒ‰çš„æ—¶å€™ï¼Œä¸ä»…å¯ä»¥æ‹–åŠ¨ï¼Œè€Œä¸”åœ¨æ‰€æœ‰itemçš„å³ä¸Šè§’æ˜¾ç¤ºåˆ é™¤æŒ‰é’®ï¼Œå°±åƒæ‰‹æœºæ¡Œé¢ä¸€æ ·ï¼Œæ€ä¹ˆæ•´ï¼Ÿ<br>æ›´æ”¹flagå€¼ï¼Œnotifydatachangedï¼Ÿè‚¯å®šä¸è¡Œå•Šï¼Œè¿™ä¸ªæ–¹æ³•è¦æŠŠæ‰€æœ‰itemé‡æ–°æµ‹é‡ï¼Œå¸ƒå±€çš„ï¼Œæ‹–æ‹½çš„æ‰‹åŠ¿å°±æ‰“æ–­äº†ï¼Œitemå°±å›åˆ°åŸä½äº†ï¼Œè€Œä¸”æ•´ä¸ªRecyclerViewéƒ½ä¼šé—ªä¸€ä¸‹ã€‚<br>è§£å†³åŠæ³•å°±æ˜¯ï¼Œå…ˆé»˜è®¤ä¸å…è®¸é•¿æŒ‰æ‹–åŠ¨ï¼Œå†ç›‘å¬itemçš„é•¿æŒ‰äº‹ä»¶ï¼Œé•¿æŒ‰çš„æ—¶å€™è°ƒç”¨ItemTouchHelper.startDragæ¥å¼€å¯æ‹–æ‹½ã€‚é‚£æ€ä¹ˆæ˜¾ç¤ºåˆ é™¤æŒ‰é’®å‘¢ï¼Ÿç›´æ¥ç”¨RecyclerViewæ¥è·å–æ‰€æœ‰ViewHolderï¼Œç›´æ¥æ“ä½œViewHolderï¼Œæ˜¾ç¤ºå‡ºåˆ é™¤æŒ‰é’®ã€‚</p>
<hr>
<p>å¥½çš„ï¼Œä»¥ä¸Šå°±æ˜¯æˆ‘è¿™æ¬¡ä½¿ç”¨ItemTouchHelperçš„è¿‡ç¨‹äº†ã€‚<br>demoä»£ç åœ¨è¿™é‡Œ<span class="exturl"><a class="exturl__link"   href="https://github.com/chenyue404/ItemTouchHelperDemo"  target="_blank" rel="noopener">https://github.com/chenyue404/ItemTouchHelperDemo</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2020/remove_app_ads_on_android/">Androidä¸Šå„ç§Appçš„å»å¹¿å‘Šå§¿åŠ¿</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">å‘è¡¨äº</span><span class="post-meta-item__value">2020-01-24</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">æ›´æ–°äº</span><span class="post-meta-item__value">2020-02-23</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h2 id="Adguard"   >
          <a href="#Adguard" class="heading-link"><i class="fas fa-link"></i></a><a href="#Adguard" class="headerlink" title="Adguard"></a>Adguard</h2>
      <figure class="highlight plain"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">||pstatp.com&#x2F;obj&#x2F;ad-pattern^</span><br><span class="line">||snssdk.com&#x2F;api&#x2F;ad^</span><br><span class="line">||api.xiachufang.com&#x2F;v2&#x2F;ad^</span><br><span class="line">||restapi.ele.me&#x2F;lego&#x2F;new_splash_screen^</span><br></pre></td></tr></table></div></figure>


        <h2 id="host"   >
          <a href="#host" class="heading-link"><i class="fas fa-link"></i></a><a href="#host" class="headerlink" title="host"></a>host</h2>
      <p>AdAdayçš„é»˜è®¤åˆ—è¡¨å…ˆæ¥ä¸€ä¸ª</p>
<div class="table-container"><table>
<thead>
<tr>
<th>åº”ç”¨</th>
<th>åŸŸå</th>
</tr>
</thead>
<tbody><tr>
<td>é“è·¯12306</td>
<td>ad.12306.cn</td>
</tr>
<tr>
<td>æœä¹¦å¤§å¸ˆ</td>
<td>snssdk.com</td>
</tr>
<tr>
<td>ä¸‹å¨æˆ¿</td>
<td>api.xiachufang.com/v2/ad/*</td>
</tr>
</tbody></table></div>

        <h2 id="Activity"   >
          <a href="#Activity" class="heading-link"><i class="fas fa-link"></i></a><a href="#Activity" class="headerlink" title="Activity"></a>Activity</h2>
      <figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell am start -n *</span><br></pre></td></tr></table></div></figure>
<div class="table-container"><table>
<thead>
<tr>
<th>åº”ç”¨</th>
<th>Activity</th>
<th>æ˜¯å¦éœ€è¦root</th>
</tr>
</thead>
<tbody><tr>
<td>æœä¹¦å¤§å¸ˆ</td>
<td>com.flyersoft.seekbooks/com.flyersoft.seekbooks.ActivityMain</td>
<td>æ˜¯</td>
</tr>
<tr>
<td>é¥¿äº†ä¹ˆ</td>
<td>me.ele/me.ele.application.ui.home.HomeActivity</td>
<td>æ˜¯</td>
</tr>
<tr>
<td>æ‹›å•†é“¶è¡Œ</td>
<td>é•¿æŒ‰å›¾æ ‡ï¼Œç‚¹å‡»â€œè´¦æˆ·â€è¿›å…¥</td>
<td>å¦</td>
</tr>
<tr>
<td></td>
<td>æµè§ˆå™¨æ‰“å¼€<code>javascript:window.location.href=&#39;cmbmobilebank://cmbls/functionjump?id=1&amp;action=gofuncid&amp;funcid=6001003&amp;keeponPath=true&amp;source=today&#39;;</code></td>
<td>å¦</td>
</tr>
</tbody></table></div>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2020/zero/">ä¸çŸ¥é“ç¬¬å‡ ä¸ªåšå®¢</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">å‘è¡¨äº</span><span class="post-meta-item__value">2020-01-17</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">æ›´æ–°äº</span><span class="post-meta-item__value">2020-01-24</span></span></div></header><div class="post-body"><div class="post-excerpt"><p>å·²ç»è®°ä¸å¾—æ˜¯ç¬¬å‡ ä¸ªblogäº†ï¼Œå»ºäº†ï¼Œæ­»äº†ï¼Œä¸ç®¡äº†ã€‚è¿™ä¸ªè¿˜æ˜¯å¥½å¥½å†™å§ã€‚<br>markdownï¼Œç®€ç®€å•å•åœ°å†™ã€‚</p>
</div></div></article></section><nav class="paginator"><div class="paginator-inner"><span class="page-number current">1</span></div></nav></div></div><div class="sidebar-wrap" id="sidebar-wrap"><aside class="sidebar" id="sidebar"><section class="sidebar-toc hide"></section><!-- ov = overview--><section class="sidebar-ov"><div class="sidebar-ov-author"><div class="sidebar-ov-author__avatar"><img class="sidebar-ov-author__avatar_img" src="/assets/avatar.png" alt="avatar"></div></div><div class="sidebar-ov-social"><a class="sidebar-ov-social-item" href="https://github.com/chenyue404/" target="_blank" rel="noopener" data-popover="Github" data-popover-pos="up"><span class="sidebar-ov-social-item__icon"><i class="fab fa-github"></i></span></a><a class="sidebar-ov-social-item" href="https://www.weibo.com/2168310090/" target="_blank" rel="noopener" data-popover="å¾®åš" data-popover-pos="up"><span class="sidebar-ov-social-item__icon"><i class="fab fa-weibo"></i></span></a></div><div class="sidebar-ov-feed"><span class="sidebar-ov-feed-rss"><a class="sidebar-ov-feed-rss__link" href="/atom.xml" target="_blank" rel="noopener"><span class="sidebar-ov-feed-rss__icon"><i class="fas fa-rss"></i></span><span>RSS è®¢é˜…</span></a></span></div><div class="sidebar-ov-state"><a class="sidebar-ov-state-item sidebar-ov-state-item--posts" href="/archives/"><div class="sidebar-ov-state-item__count">8</div><div class="sidebar-ov-state-item__name">å½’æ¡£</div></a><a class="sidebar-ov-state-item sidebar-ov-state-item--categories" href="/categories/"><div class="sidebar-ov-state-item__count">3</div><div class="sidebar-ov-state-item__name">åˆ†ç±»</div></a><a class="sidebar-ov-state-item sidebar-ov-state-item--tags" href="/tags/"><div class="sidebar-ov-state-item__count">4</div><div class="sidebar-ov-state-item__name">æ ‡ç­¾</div></a></div><div class="sidebar-ov-cc"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" target="_blank" rel="noopener" data-popover="çŸ¥è¯†å…±äº«è®¸å¯åè®®" data-popover-pos="up"><img src="/images/cc-by-nc-sa.svg"></a></div></section></aside></div><div class="clearfix"></div></div></main><footer class="footer" id="footer"><div class="footer-inner"><div><span>Copyright Â© 2021</span><span class="footer__icon"><i class="fas fa-heart"></i></span><span>å°˜å²³</span></div><div><span>ç”± <a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a> å¼ºåŠ›é©±åŠ¨</span><span> v4.2.0</span><span class="footer__devider">|</span><span>ä¸»é¢˜ - <a href="https://github.com/liuyib/hexo-theme-stun/" title="Stun" target="_blank" rel="noopener">Stun</a></span><span> v2.6.2</span></div></div></footer><div class="loading-bar" id="loading-bar"><div class="loading-bar__progress"></div></div><div class="back2top" id="back2top"><span class="back2top__icon"><i class="fas fa-rocket"></i></span></div></div><div class="search-mask"></div><div class="search-popup"><span class="search-close"></span><div class="search-input"><input placeholder="æœç´¢æ–‡ç« ï¼ˆæ”¯æŒå¤šå…³é”®è¯ï¼Œè¯·ç”¨ç©ºæ ¼åˆ†éš”ï¼‰"><div class="search-btns">ä½¿ç”¨æœç´¢ï¼š<span class="search-btns-item search-btns-item--google"><i class="fab fa-google"></i>è°·æ­Œ</span><span class="search-btns-item search-btns-item--bing"><i></i>å¿…åº”</span></div></div><div class="search-results"></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@v3.4.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.ui.min.js"></script><script>function initSearch() {
  var isXML = true;
  var search_path = 'search.json';

  if (!search_path) {
    search_path = 'search.xml';
  } else if (/json$/i.test(search_path)) {
    isXML = false;
  }

  var path = '/' + search_path;
  $.ajax({
    url: path,
    dataType: isXML ? 'xml' : 'json',
    async: true,
    success: function (res) {
      var datas = isXML ? $('entry', res).map(function () {
        // å°† XML è½¬ä¸º JSON
        return {
          title: $('title', this).text(),
          content: $('content', this).text(),
          url: $('url', this).text()
        };
      }).get() : res;
      var $input = $('.search-input input');
      var $result = $('.search-results');
      // æœç´¢å¯¹è±¡ï¼ˆæ ‡é¢˜ã€å†…å®¹ï¼‰çš„æƒé‡ï¼Œå½±å“æ˜¾ç¤ºé¡ºåº
      var WEIGHT = { title: 100, content: 1 };
      var searchPost = function () {
        var searchText = $input.val().toLowerCase().trim();
        // æ ¹æ®ç©ºç™½å­—ç¬¦åˆ†éš”å…³é”®å­—
        var keywords = searchText.split(/[\s]+/);
        // æœç´¢ç»“æœ
        var matchPosts = [];

        // æœ‰å¤šä¸ªå…³é”®å­—æ—¶ï¼Œå°†åŸæ–‡å­—æ•´ä¸ªä¿å­˜ä¸‹æ¥
        if (keywords.length > 1) {
          keywords.push(searchText);
        }
        // é˜²æ­¢æœªè¾“å…¥å­—ç¬¦æ—¶æœç´¢
        if (searchText.length > 0) {
          datas.forEach(function (data) {
            var isMatch  = false;
            // æ²¡æœ‰æ ‡é¢˜çš„æ–‡ç« ä½¿ç”¨é¢„è®¾çš„ i18n å˜é‡ä»£æ›¿
            var title = (data.title && data.title.trim()) || '[ æ–‡ç« æ— æ ‡é¢˜ ]';
            var titleLower = title && title.toLowerCase();
            // åˆ é™¤ HTML æ ‡ç­¾ å’Œ æ‰€æœ‰ç©ºç™½å­—ç¬¦
            var content = data.content && data.content.replace(/<[^>]+>/g, '');
            var contentLower = content && content.toLowerCase();
            // åˆ é™¤é‡å¤çš„ /
            var postURL = data.url && decodeURI(data.url).replace(/\/{2,}/g, '/');
            // æ ‡é¢˜ä¸­åŒ¹é…åˆ°çš„å…³é”®è¯
            var titleHitSlice = [];
            // å†…å®¹ä¸­åŒ¹é…åˆ°çš„å…³é”®è¯
            var contentHitSlice = [];

            keywords.forEach(function (keyword) {
              /**
              * è·å–åŒ¹é…çš„å…³é”®è¯çš„ç´¢å¼•
              * @param {String} keyword è¦åŒ¹é…çš„å…³é”®å­—
              * @param {String} text åŸæ–‡å­—
              * @param {Boolean} caseSensitive æ˜¯å¦åŒºåˆ†å¤§å°å†™
              * @param {Number} weight åŒ¹é…å¯¹è±¡çš„æƒé‡ã€‚æƒé‡å¤§çš„ä¼˜å…ˆæ˜¾ç¤º
              * @return {Array}
              */
              function getIndexByword (word, text, caseSensitive, weight) {
                if (!word || !text) {
                  return [];
                };

                var startIndex = 0; // æ¯æ¬¡åŒ¹é…çš„å¼€å§‹ç´¢å¼•
                var index = -1;     // åŒ¹é…åˆ°çš„ç´¢å¼•å€¼
                var result = [];    // åŒ¹é…ç»“æœ

                if (!caseSensitive) {
                  word = word.toLowerCase();
                  text = text.toLowerCase();
                }

                while((index = text.indexOf(word, startIndex)) !== -1) {
                  var hasMatch = false;
                  // ç´¢å¼•ä½ç½®ç›¸åŒçš„å…³é”®è¯ï¼Œä¿ç•™é•¿åº¦è¾ƒé•¿çš„
                  titleHitSlice.forEach(function (hit) {
                    if (hit.index === index && hit.word.length < word.length) {
                      hit.word = word;
                      hasMatch = true;
                    }
                  });
                  startIndex = index + word.length;
                  !hasMatch && result.push({ index: index, word: word, weight: weight });
                }
                return result;
              }
              titleHitSlice = titleHitSlice.concat(getIndexByword(keyword, titleLower, false, WEIGHT.title));
              contentHitSlice = contentHitSlice.concat(getIndexByword(keyword, contentLower, false, WEIGHT.content));
            });

            var hitTitle = titleHitSlice.length;
            var hitContent = contentHitSlice.length;

            if (hitTitle > 0 || hitContent > 0) {
              isMatch = true;
            }
            if (isMatch) {
              ;[titleHitSlice, contentHitSlice].forEach(function (hit) {
                // æŒ‰ç…§åŒ¹é…æ–‡å­—çš„ç´¢å¼•çš„é€’å¢é¡ºåºæ’åº
                hit.sort(function (left, right) {
                  return left.index - right.index;
                });
              });
              /**
              * ç»™æ–‡æœ¬ä¸­åŒ¹é…åˆ°çš„å…³é”®è¯æ·»åŠ æ ‡è®°ï¼Œä»è€Œè¿›è¡Œé«˜äº®æ˜¾ç¤º
              * @param {String} text åŸæ–‡æœ¬
              * @param {Array} hitSlice åŒ¹é…é¡¹çš„ç´¢å¼•ä¿¡æ¯
              * @param {Number} start å¼€å§‹ç´¢å¼•
              * @param {Number} end ç»“æŸç´¢å¼•
              * @return {String}
              */
              function highlightKeyword (text, hitSlice, start, end) {
                if (!text || !hitSlice || !hitSlice.length) {
                  return;
                }

                var result = '';
                var startIndex = start;
                var endIndex = end;
                hitSlice.forEach(function (hit) {
                  if (hit.index < startIndex) {
                    return;
                  }

                  var hitWordEnd = hit.index + hit.word.length;
                  result += text.slice(startIndex, hit.index);
                  result += '<b>' + text.slice(hit.index, hitWordEnd) + '</b>';
                  startIndex = hitWordEnd;
                });
                result += text.slice(startIndex, endIndex);
                return result;
              }

              var postData = {};
              // æ–‡ç« æ€»çš„æœç´¢æƒé‡
              var postWeight = titleHitSlice.length * WEIGHT.title + contentHitSlice.length * WEIGHT.content;
              // æ ‡è®°åŒ¹é…å…³é”®è¯åçš„æ ‡é¢˜
              var postTitle = highlightKeyword(title, titleHitSlice, 0, title.length) || title;
              // æ ‡è®°åŒ¹é…å…³é”®è¯åçš„å†…å®¹
              var postContent;
              // æ˜¾ç¤ºå†…å®¹çš„é•¿åº¦
              var SHOW_WORD_LENGTH = 200;
              // å‘½ä¸­å…³é”®è¯å‰çš„å­—ç¬¦æ˜¾ç¤ºé•¿åº¦
              var SHOW_WORD_FRONT_LENGTH = 20;
              var SHOW_WORD_END_LENGTH = SHOW_WORD_LENGTH - SHOW_WORD_FRONT_LENGTH;

              // æˆªå–åŒ¹é…çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œå‰åå…± 200 ä¸ªå­—ç¬¦æ¥æ˜¾ç¤º
              if (contentHitSlice.length > 0) {
                var firstIndex = contentHitSlice[0].index;
                var start = firstIndex > SHOW_WORD_FRONT_LENGTH ? firstIndex - SHOW_WORD_FRONT_LENGTH : 0;
                var end = firstIndex + SHOW_WORD_END_LENGTH;
                postContent = highlightKeyword(content, contentHitSlice, start, end);
              } else { // æœªåŒ¹é…åˆ°å†…å®¹ï¼Œç›´æ¥æˆªå–å‰ 200 ä¸ªå­—ç¬¦æ¥æ˜¾ç¤º
                postContent = content.slice(0, SHOW_WORD_LENGTH);
              }
              postData.title = postTitle;
              postData.content = postContent;
              postData.url = postURL;
              postData.weight = postWeight;
              matchPosts.push(postData);
            }
          });
        }

        var resultInnerHtml = '';
        if (matchPosts.length) {
          // æŒ‰æƒé‡é€’å¢çš„é¡ºåºæ’åºï¼Œä½¿æƒé‡å¤§çš„ä¼˜å…ˆæ˜¾ç¤º
          matchPosts.sort(function (left, right) {
            return right.weight - left.weight;
          });
          resultInnerHtml += '<ul>';
          matchPosts.forEach(function (post) {
            resultInnerHtml += '<li><a class="search-results-title" href="' + post.url + '">';
            resultInnerHtml += post.title;
            resultInnerHtml += '</a><div class="search-results-content">';
            resultInnerHtml += post.content;
            resultInnerHtml += '</div></li>';
          });
          resultInnerHtml += '</ul>';
        } else {
          resultInnerHtml += '<div class="search-results-none"><i class="far fa-meh"></i></div>';
        }
        $result.html(resultInnerHtml);
      };
      $input.on('input', searchPost);
      $input.on('keyup', function (e) {
        if (e.keyCode === Stun.utils.codeToKeyCode('Enter')) {
          searchPost();
        }
      });
    }
  });
}

function closeSearch () {
  $('body').css({ overflow: 'auto' });
  $('.search-popup').css({ display: 'none' });
  $('.search-mask').css({ display: 'none' });
}

window.addEventListener('DOMContentLoaded', function () {
  Stun.utils.pjaxReloadLocalSearch = function () {
    $('.header-nav-search').on('click', function (e) {
      e.stopPropagation();
      $('body').css('overflow', 'hidden');
      $('.search-popup')
        .velocity('stop')
        .velocity('transition.expandIn', {
          duration: 300,
          complete: function () {
            $('.search-popup input').focus();
          }
        });
      $('.search-mask')
        .velocity('stop')
        .velocity('transition.fadeIn', {
          duration: 300
        });

      initSearch();
    });
    $('.search-mask, .search-close').on('click', function () {
      closeSearch();
    });
    $(document).on('keydown', function (e) {
      // Escape <=> 27
      if (e.keyCode === Stun.utils.codeToKeyCode('Escape')) {
        closeSearch();
      }
    });
  };

  Stun.utils.pjaxReloadLocalSearch();
}, false);

function safeOpenUrl(url) {
  var newTab = window.open();
  newTab.opener = null;
  newTab.location = url;
}

function extSearch(engine) {
  var engines = {
    google: 'https://www.google.com/search?q=',
    bing: 'https://cn.bing.com/search?q=',
    baidu: 'https://www.baidu.com/s?ie=UTF-8&wd=',
  };
  var host = window.location.host;
  var query = $('.search-input input').val().toLowerCase().trim();
  var uri = engines[engine] + query + ' site:' + host;

  if (query) {
    safeOpenUrl(uri);
  } else {
    Stun.utils.popAlert('warning', 'è¯·è¾“å…¥å­—ç¬¦');
  }
}

var assistSearchList = window.CONFIG.assistSearch;

if (Array.isArray(assistSearchList)) {
  assistSearchList.forEach(function (name) {
    document.querySelector('.search-btns-item--' + name).addEventListener('click', function () {
      extSearch(name);
    }, false);
  });
}</script><script src="/js/utils.js?v=2.6.2"></script><script src="/js/stun-boot.js?v=2.6.2"></script><script src="/js/scroll.js?v=2.6.2"></script><script src="/js/header.js?v=2.6.2"></script><script src="/js/sidebar.js?v=2.6.2"></script><script type="application/json" src="/search.json"></script></body></html>